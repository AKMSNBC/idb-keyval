var db;function getDB(){return db||(db=new Promise(function(e,t){var n=indexedDB.open("keyval-store",1);n.onerror=function(){t(n.error)},n.onupgradeneeded=function(){n.result.createObjectStore("keyval")},n.onsuccess=function(){e(n.result)}})),db}function withStore(e,t){return getDB().then(function(n){return new Promise(function(r,o){var u=n.transaction("keyval",e);u.oncomplete=function(){r()},u.onerror=function(){o(u.error)},t(u.objectStore("keyval"))})})}var idbKeyval={get:function(e){var t;return withStore("readonly",function(n){t=n.get(e)}).then(function(){return t.result})},set:function(e,t){return withStore("readwrite",function(n){n.put(t,e)})},delete:function(e){return withStore("readwrite",function(t){t.delete(e)})},clear:function(){return withStore("readwrite",function(e){e.clear()})},keys:function(){var e=[];return withStore("readonly",function(t){(t.openKeyCursor||t.openCursor).call(t).onsuccess=function(){this.result&&(e.push(this.result.key),this.result.continue())}}).then(function(){return e})}};export default idbKeyval;
